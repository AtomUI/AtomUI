<ResourceDictionary
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:atom="https://atomui.net"
    x:ClassModifier="internal">
    <ControlTheme x:Key="{x:Type atom:SplitView}" TargetType="atom:SplitView">
        <Setter Property="OpenPaneLength"
                Value="{DynamicResource {x:Static atom:SplitViewTokenKey.OpenPaneThemeLength}}" />
        <Setter Property="CompactPaneLength"
                Value="{DynamicResource {x:Static atom:SplitViewTokenKey.CompactPaneThemeLength}}" />
        <Setter Property="PaneBackground" Value="{DynamicResource {x:Static atom:SharedTokenKey.ColorBgContainer}}" />
        <Setter Property="PaneOpenMotionDuration"
                Value="{DynamicResource {x:Static atom:SplitViewTokenKey.PaneOpenMotionDuration}}" />
        <Setter Property="PaneCloseMotionDuration"
                Value="{DynamicResource {x:Static atom:SplitViewTokenKey.PaneCloseMotionDuration}}" />
        <Setter Property="PaneMotionEasing"
                Value="{DynamicResource {x:Static atom:SplitViewTokenKey.PaneMotionEasing}}" />

        <Style Selector="^:left">
            <Setter Property="Template">
                <ControlTemplate>
                    <Grid Name="Container" Background="{TemplateBinding Background}">
                        <Grid.ColumnDefinitions>
                            <!-- why is this throwing a binding error? -->
                            <ColumnDefinition
                                Width="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.PaneColumnGridLength}" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Panel Name="PART_PaneRoot"
                               Background="{TemplateBinding PaneBackground}"
                               ClipToBounds="True"
                               HorizontalAlignment="Left"
                               ZIndex="100">
                            <ContentPresenter x:Name="PART_PanePresenter"
                                              Content="{TemplateBinding Pane}"
                                              ContentTemplate="{TemplateBinding PaneTemplate}" />
                            <Rectangle Name="HCPaneBorder"
                                       Fill="{DynamicResource {x:Static atom:SharedTokenKey.ColorBorder}}"
                                       Width="1"
                                       HorizontalAlignment="Right" />
                        </Panel>

                        <Panel Name="ContentRoot" Grid.Column="1">
                            <ContentPresenter x:Name="PART_ContentPresenter"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}" />
                            <Rectangle Name="LightDismissLayer"
                                       Fill="Transparent"
                                       IsVisible="False" />
                        </Panel>

                    </Grid>
                </ControlTemplate>
            </Setter>

            <Style Selector="^:overlay">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Width"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneWidth}" />
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                    <Setter Property="Grid.Column" Value="0" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Column" Value="1" />
                    <Setter Property="Grid.ColumnSpan" Value="2" />
                </Style>
            </Style>

            <Style Selector="^:compactinline">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                    <Setter Property="Grid.Column" Value="0" />
                    <Setter Property="Width"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneWidth}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Column" Value="1" />
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                </Style>
            </Style>

            <Style Selector="^:compactoverlay">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <!-- ColumnSpan should be 2 -->
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                    <Setter Property="Grid.Column" Value="0" />
                    <Setter Property="Width"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneWidth}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Column" Value="1" />
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                </Style>
            </Style>

            <Style Selector="^:inline">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                    <Setter Property="Grid.Column" Value="0" />
                    <Setter Property="Width"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneWidth}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Column" Value="1" />
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                </Style>
            </Style>
        </Style>

        <Style Selector="^:right">
            <Setter Property="Template">
                <ControlTemplate>
                    <Grid Name="Container" Background="{TemplateBinding Background}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition
                                Width="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.PaneColumnGridLength}" />
                        </Grid.ColumnDefinitions>

                        <Panel Name="PART_PaneRoot" Background="{TemplateBinding PaneBackground}"
                               ClipToBounds="True"
                               HorizontalAlignment="Right"
                               ZIndex="100">
                            <ContentPresenter x:Name="PART_PanePresenter"
                                              Content="{TemplateBinding Pane}"
                                              ContentTemplate="{TemplateBinding PaneTemplate}" />
                            <Rectangle Name="HCPaneBorder"
                                       Fill="{DynamicResource {x:Static atom:SharedTokenKey.ColorBorder}}"
                                       Width="1" HorizontalAlignment="Left" />
                        </Panel>

                        <Panel Name="ContentRoot" Grid.Column="0">
                            <ContentPresenter x:Name="PART_ContentPresenter"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}" />
                            <Rectangle Name="LightDismissLayer" Fill="Transparent" IsVisible="False" />
                        </Panel>

                    </Grid>
                </ControlTemplate>
            </Setter>

            <Style Selector="^:overlay">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Width"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneWidth}" />
                    <Setter Property="Grid.ColumnSpan" Value="2" />
                    <Setter Property="Grid.Column" Value="1" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Column" Value="0" />
                    <Setter Property="Grid.ColumnSpan" Value="2" />
                </Style>
            </Style>

            <Style Selector="^:compactinline">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                    <Setter Property="Grid.Column" Value="1" />
                    <Setter Property="Width"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneWidth}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Column" Value="0" />
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                </Style>
            </Style>

            <Style Selector="^:compactoverlay">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.ColumnSpan" Value="2" />
                    <Setter Property="Grid.Column" Value="1" />
                    <Setter Property="Width"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneWidth}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Column" Value="0" />
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                </Style>
            </Style>

            <Style Selector="^:inline">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                    <Setter Property="Grid.Column" Value="1" />
                    <Setter Property="Width"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneWidth}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Column" Value="0" />
                    <Setter Property="Grid.ColumnSpan" Value="1" />
                </Style>
            </Style>
        </Style>

        <!-- TOP placement -->
        <Style Selector="^:top">
            <Setter Property="Template">
                <ControlTemplate>
                    <Grid Name="Container" Background="{TemplateBinding Background}">
                        <Grid.RowDefinitions>
                            <RowDefinition
                                Height="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.PaneRowGridLength}" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <Panel Name="PART_PaneRoot"
                               Background="{TemplateBinding PaneBackground}"
                               ClipToBounds="True"
                               VerticalAlignment="Top"
                               ZIndex="100">
                            <ContentPresenter x:Name="PART_PanePresenter"
                                              Content="{TemplateBinding Pane}"
                                              ContentTemplate="{TemplateBinding PaneTemplate}" />
                            <Rectangle Name="HCPaneBorder"
                                       Fill="{DynamicResource {x:Static atom:SharedTokenKey.ColorBorder}}"
                                       Height="1"
                                       VerticalAlignment="Bottom" />
                        </Panel>

                        <Panel Name="ContentRoot" Grid.Row="1">
                            <ContentPresenter x:Name="PART_ContentPresenter"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}" />
                            <Rectangle Name="LightDismissLayer"
                                       Fill="Transparent"
                                       IsVisible="False" />
                        </Panel>

                    </Grid>
                </ControlTemplate>
            </Setter>

            <Style Selector="^:overlay">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Height"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneHeight}" />
                    <Setter Property="Grid.RowSpan" Value="1" />
                    <Setter Property="Grid.Row" Value="0" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Row" Value="1" />
                    <Setter Property="Grid.RowSpan" Value="2" />
                </Style>
            </Style>

            <Style Selector="^:compactinline">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.RowSpan" Value="1" />
                    <Setter Property="Grid.Row" Value="0" />
                    <Setter Property="Height"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneHeight}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Row" Value="1" />
                    <Setter Property="Grid.RowSpan" Value="1" />
                </Style>
            </Style>

            <Style Selector="^:compactoverlay">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.RowSpan" Value="1" />
                    <Setter Property="Grid.Row" Value="0" />
                    <Setter Property="Height"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneHeight}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Row" Value="1" />
                    <Setter Property="Grid.RowSpan" Value="1" />
                </Style>
            </Style>

            <Style Selector="^:inline">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.RowSpan" Value="1" />
                    <Setter Property="Grid.Row" Value="0" />
                    <Setter Property="Height"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneHeight}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Row" Value="1" />
                    <Setter Property="Grid.RowSpan" Value="1" />
                </Style>
            </Style>
        </Style>

        <!-- BOTTOM placement -->
        <Style Selector="^:bottom">
            <Setter Property="Template">
                <ControlTemplate>
                    <Grid Name="Container" Background="{TemplateBinding Background}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition
                                Height="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.PaneRowGridLength}" />
                        </Grid.RowDefinitions>

                        <Panel Name="PART_PaneRoot" Background="{TemplateBinding PaneBackground}"
                               ClipToBounds="True"
                               VerticalAlignment="Bottom"
                               ZIndex="100">
                            <ContentPresenter x:Name="PART_PanePresenter"
                                              Content="{TemplateBinding Pane}"
                                              ContentTemplate="{TemplateBinding PaneTemplate}" />
                            <Rectangle Name="HCPaneBorder"
                                       Fill="{DynamicResource {x:Static atom:SharedTokenKey.ColorBorder}}"
                                       Height="1" VerticalAlignment="Top" />
                        </Panel>

                        <Panel Name="ContentRoot" Grid.Row="0">
                            <ContentPresenter x:Name="PART_ContentPresenter"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}" />
                            <Rectangle Name="LightDismissLayer" Fill="Transparent" IsVisible="False" />
                        </Panel>

                    </Grid>
                </ControlTemplate>
            </Setter>

            <Style Selector="^:overlay">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Height"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneHeight}" />
                    <Setter Property="Grid.RowSpan" Value="2" />
                    <Setter Property="Grid.Row" Value="1" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Row" Value="0" />
                    <Setter Property="Grid.RowSpan" Value="2" />
                </Style>
            </Style>

            <Style Selector="^:compactinline">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.RowSpan" Value="1" />
                    <Setter Property="Grid.Row" Value="1" />
                    <Setter Property="Height"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneHeight}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Row" Value="0" />
                    <Setter Property="Grid.RowSpan" Value="1" />
                </Style>
            </Style>

            <Style Selector="^:compactoverlay">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.RowSpan" Value="2" />
                    <Setter Property="Grid.Row" Value="1" />
                    <Setter Property="Height"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneHeight}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Row" Value="0" />
                    <Setter Property="Grid.RowSpan" Value="1" />
                </Style>
            </Style>

            <Style Selector="^:inline">
                <Style Selector="^ /template/ Panel#PART_PaneRoot">
                    <Setter Property="Grid.RowSpan" Value="1" />
                    <Setter Property="Grid.Row" Value="1" />
                    <Setter Property="Height"
                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneHeight}" />
                </Style>
                <Style Selector="^ /template/ Panel#ContentRoot">
                    <Setter Property="Grid.Row" Value="0" />
                    <Setter Property="Grid.RowSpan" Value="1" />
                </Style>
            </Style>
        </Style>

        <!-- Placement-specific open/closed transitions for horizontal panes (left/right) -->
        <Style Selector="^:left:open /template/ Panel#PART_PaneRoot">
            <Setter Property="Transitions" Value="{Binding PaneOpenTransitions, RelativeSource={RelativeSource TemplatedParent}}"/>
            <Setter Property="Width"
                    Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=OpenPaneLength}" />
        </Style>
        <Style Selector="^:right:open /template/ Panel#PART_PaneRoot">
            <Setter Property="Transitions" Value="{Binding PaneOpenTransitions, RelativeSource={RelativeSource TemplatedParent}}"/>
            <Setter Property="Width"
                    Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=OpenPaneLength}" />
        </Style>

        <Style Selector="^:left:closed /template/ Panel#PART_PaneRoot">
            <Setter Property="Transitions" Value="{Binding PaneCloseTransitions, RelativeSource={RelativeSource TemplatedParent}}"/>
            <Setter Property="Width"
                    Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneWidth}" />
        </Style>
        <Style Selector="^:right:closed /template/ Panel#PART_PaneRoot">
            <Setter Property="Transitions" Value="{Binding PaneCloseTransitions, RelativeSource={RelativeSource TemplatedParent}}"/>
            <Setter Property="Width"
                    Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneWidth}" />
        </Style>

        <!-- Placement-specific open/closed transitions for vertical panes (top/bottom) -->
        <Style Selector="^:top:open /template/ Panel#PART_PaneRoot">
            <Setter Property="Transitions" Value="{Binding PaneOpenTransitions, RelativeSource={RelativeSource TemplatedParent}}"/>
            <Setter Property="Height"
                    Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=OpenPaneLength}" />
        </Style>

        <Style Selector="^:bottom:open /template/ Panel#PART_PaneRoot">
            <Setter Property="Transitions" Value="{Binding PaneOpenTransitions, RelativeSource={RelativeSource TemplatedParent}}"/>
            <Setter Property="Height"
                    Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=OpenPaneLength}" />
        </Style>

        <Style Selector="^:top:closed /template/ Panel#PART_PaneRoot">
            <Setter Property="Transitions" Value="{Binding PaneCloseTransitions, RelativeSource={RelativeSource TemplatedParent}}"/>
            <Setter Property="Height"
                    Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneHeight}" />
        </Style>

        <Style Selector="^:bottom:closed /template/ Panel#PART_PaneRoot">
            <Setter Property="Transitions" Value="{Binding PaneCloseTransitions, RelativeSource={RelativeSource TemplatedParent}}"/>
            <Setter Property="Height"
                    Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.ClosedPaneHeight}" />
        </Style>

        <Style Selector="^:lightDismiss /template/ Rectangle#LightDismissLayer">
            <Setter Property="Fill" Value="{DynamicResource {x:Static atom:SharedTokenKey.ColorBgMask}}" />
        </Style>
        <Style Selector="^:overlay:open /template/ Rectangle#LightDismissLayer">
            <Setter Property="IsVisible" Value="True" />
        </Style>
        <Style Selector="^:compactoverlay:open /template/ Rectangle#LightDismissLayer">
            <Setter Property="IsVisible" Value="True" />
        </Style>
    </ControlTheme>
</ResourceDictionary>